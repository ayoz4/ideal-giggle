{"ast":null,"code":"import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\nimport { persistStore, persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport rootReducer from \"./reducers\";\n\nvar makeConfiguredStore = function makeConfiguredStore(reducer, initialState) {\n  return createStore(reducer, initialState, composeWithDevTools(applyMiddleware(thunk)));\n};\n\nexport var makeStore = function makeStore(initialState, _ref) {\n  var isServer = _ref.isServer,\n      req = _ref.req,\n      debug = _ref.debug,\n      storeKey = _ref.storeKey;\n\n  if (isServer) {\n    initialState = initialState || {\n      fromServer: \"foo\"\n    };\n    return makeConfiguredStore(rootReducer, initialState);\n  } else {\n    var persistConfig = {\n      key: \"nextjs\",\n      whitelist: [\"cart\"],\n      storage: storage\n    };\n    var persistedReducer = persistReducer(persistConfig, rootReducer);\n    var store = makeConfiguredStore(persistedReducer, initialState);\n    store.__persistor = persistStore(store);\n    return store;\n  }\n};","map":null,"metadata":{},"sourceType":"module"}